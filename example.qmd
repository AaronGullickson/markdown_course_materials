---
##  Author and title information ##
title: Example Quarto Document
author:
  - name: Aaron Gullickson
    orcid: 0000-0001-7237-8131
    email: aarong@uoregon.edu
    url: https://aarongullickson.netlify.app/
    attributes:
      corresponding: true
    affiliations:
      - id: uo
        name: University of Oregon
        department: Sociology
        address: 727 PLC
        city: Eugene
        region: OR
        country: USA
        postal-code: 97405
  - name: Bob Secondauthor
    affiliations:
      - ref: uo
## Paper details ##
abstract: Ipsum nostra facilisis sapien nullam. Facilisi himenaeos pharetra ultricies scelerisque non fusce quisque aliquam netus tellus. Dictum tellus et sociis quisque ornare ad a natoque magna blandit. Tortor duis aptent cursus lacus inceptos tristique magnis dictumst. Taciti varius nascetur aliquet hac ornare vitae ultricies. Rhoncus primis purus morbi aliquet quam cubilia nullam malesuada ridiculus.
keywords: [Quarto, Examples, Reproducibility]
#  - Quarto
#  - Examples
#  - Reproducibility
description: An R Markdown Document for Testing and Playing
thanks: Thanks to everyone for checking this out.
lang: en
## Execute parameters are used for default code chunk options ##
execute: 
  eval: true
  echo: false
  warning: false
  error: false
## Some figure parameters ##
fig-height: 3
fig-align: center        # default is center
fig-cap-location: bottom # default is bottom
fig-dpi: 300
## Bibliography information ##
bibliography: references.bib
csl: https://www.zotero.org/styles/american-journal-of-sociology
## Available formats ##
format: 
  html:
    keep-md: false
    self-contained: false
    #theme: cosmo
    #css: css/my_styles.css
    #mainfont: Times New Roman #css font-family
    #fontsize: 1.1em
    #linestretch: 1.7
    #fontcolor: "white"
    #backgroundcolor: "grey"
    #linkcolor: "purple"
    #max-width: "1600px"
  pdf:
    fig-pos: "!t"
    keep-md: false
    keep-tex: true
    #documentclass: scrartcl # LaTeX document class
    #fontfamily: accanthis   # font family, see below for options
    #fontsize: 11pt          # font size (typically 10pt, 11pt, or 12pt)
    #linestretch: 1          # line spacing (1 for single, 2 for double)
    #geometry: margin=0.5in  # controls the margin size
    #papersize: letter       # controls the paper type
    include-in-header: 
      text: |
        \usepackage{dcolumn}
        \renewcommand{\thetable}{\arabic{table}}
        \renewcommand{\thefigure}{\Roman{figure}}
        \usepackage{subcaption}
        \DeclareCaptionSubType{figure}
        \renewcommand{\thesubfigure}{\Alph{subfigure}}
  docx:
    keep-md: false
    #reference-doc: sample_word_style.docx
prefer-html: true        # This ensures that html tables will render in Word
## Cross-reference customization ##
crossref:
 fig-title: Fig      # (default is "Figure")
 tbl-title: Table       # (default is "Table")
 title-delim: " -"       # (default is ":")
 fig-prefix: Fig.     # (default is "Figure")
 tbl-prefix: Tab.      # (default is "Table")
 eq-prefix: Eq.         # (default is "Equation")
 ref-hyperlink: true    # (default is true)
 fig-labels: alpha A     # (default is arabic)
 tbl-labels: arabic     # (default is arabic)
 eq-labels: arabic      # (default is arabic)
 subref-labels: roman I # (default is alpha a)
## Which editor to use as default ##
editor: source
---

```{r}
#| label: setup-library
#| include: false
library(ggplot2)
library(tidyverse)
library(scales)
library(texreg)
library(kableExtra)
library(gt)
library(gtsummary)
library(gapminder)
```

```{r}
#| label: load-data
#| include: false
load("input/popularity.RData")
```

# Introduction

## Here is a subsection

### Here is a subsubsection

#### Here is a subsubsubsection

##### Here is a subsubsubsection

###### Something

Ipsum interdum enim dapibus luctus potenti viverra ridiculus vulputate! Pretium ante euismod auctor semper proin lacinia augue vitae [@abascal_love_2015; @gentzkow_code_2014]. Magnis vivamus dis dapibus dapibus tristique vestibulum venenatis accumsan lobortis suscipit faucibus. Dis **scelerisque** egestas sodales tempor nisl accumsan conubia sem mauris mi himenaeos. Facilisis curabitur habitant quam malesuada facilisis inceptos phasellus rutrum vulputate etiam primis. Na primis?

```{mermaid}
flowchart LR
  A[Hard edge] --> B(Round edge)
  B --> C{Decision}
  C --> D[Result one]
  C --> E[Result two]
```

Consectetur *sodales* suscipit ultrices venenatis sagittis hendrerit lacus. Imperdiet nunc rhoncus ornare pharetra platea ut blandit nec senectus montes quisque purus @tbl-model-gt. Phasellus rutrum rutrum aliquet rutrum erat scelerisque non augue vulputate suspendisse lacinia commodo aptent vel [@abascal_contraction_2020; @seibold_computational_2021; @abascal_love_2015]. Mattis suscipit himenaeos rhoncus integer fames aliquam [@gravlee_ethnic_2005].

1.  Sit pharetra ut lacus tortor sodales convallis?
2.  Molestie egestas fermentum aliquam convallis fames dictum?
3.  Consectetur vehicula habitant porttitor volutpat velit augue eleifend rutrum accumsan quam pretium pretium?

-   Here is a bullet
    -   Here is sub-bullet
-   Here is a bullet again

Definition

:   A thing

Consectetur ullamcorper pharetra [FIG @fig-complex-panel-2]mattis leo himenaeos magnis non est non sagittis.[^1] Nec rutrum aptent sapien convallis <!--TODO: Check this--> euismod taciti felis interdum torquent suspendisse. Ultrices auctor hac ad arcu urna leo integer. Torquent turpis accumsan suscipit cum laoreet blandit ante molestie netus a. Sociosqu placerat purus mollis senectus blandit magna quis pharetra sodales. Platea dui felis porttitor leo enim aenean interdum mauris libero primis volutpat vulputate. Ultrices ullamcorper magna consequat vehicula leo massa at erat sapien arcu scelerisque.[^2]

[^1]: This is a footnote.

[^2]: This is another footnote. This one has math. $$\sum (x_i-\bar{x})^2$$

# Background

Ipsum scelerisque id tellus luctus malesuada eget aptent nullam. Urna nec ad habitant sollicitudin dui porttitor tortor nisl augue [@seibold_computational_2021]. @mcfadden_conditional_1973 Class quam at metus mattis condimentum lacus gravida hendrerit. Tincidunt nullam laoreet facilisis dui bibendum faucibus urna.[^3]

[^3]: Another footnote!

Adipiscing habitasse integer sed fusce phasellus morbi libero mauris scelerisque fusce! Phasellus proin sem potenti torquent potenti ultrices orci bibendum morbi. Venenatis in vitae platea ligula orci dictumst pulvinar eleifend id ligula? Nisi vel mus tellus porttitor justo class cras orci est. Iaculis pretium tristique euismod facilisis vestibulum luctus lobortis quam tellus quis cum facilisis.[^4] Curabitur est parturient habitant proin elementum nascetur. @mcfadden_conditional_1973 agrees!

[^4]: Inline footnotes rule!

## Subsection 1

Amet ridiculus magna ut pulvinar viverra himenaeos dignissim malesuada elementum montes. Luctus libero torquent praesent eleifend pretium convallis dictumst dictum! Porta erat senectus class pellentesque lobortis curabitur non pulvinar varius nibh lobortis fermentum sem? Volutpat id curabitur mattis egestas netus habitasse purus aliquam montes. Pellentesque pellentesque placerat integer varius sagittis curabitur laoreet nunc maecenas ullamcorper [see @lieberson_many_1988].

Amet rutrum a venenatis mi lectus venenatis nullam purus libero. Pulvinar dapibus nisl dapibus ornare dignissim nibh congue elementum pharetra natoque cum ac laoreet tortor facilisi penatibus sollicitudin.

## Subsection 2

Adipiscing ad rhoncus nunc molestie sed feugiat? Imperdiet vivamus montes himenaeos sagittis urna nec felis vehicula nec pretium tortor? Molestie natoque sociis aenean mollis donec ornare cursus parturient tortor erat. Volutpat mi natoque sodales et hac ultricies eu pulvinar primis semper. Vitae est curabitur blandit montes tortor eros senectus porttitor maecenas.

Sit nunc lacus sapien augue ornare magnis massa odio velit maecenas mauris. Molestie justo proin venenatis hac congue facilisi suscipit arcu litora quam varius urna. Lacinia montes convallis ante sapien orci platea rutrum. Gravida dignissim mauris bibendum sollicitudin libero primis ultrices enim aliquam dictum! Vivamus sociis odio non vivamus ridiculus. Libero vitae cursus montes aptent est quisque sociosqu fringilla posuere lacinia sagittis. Quisque orci cum nulla sollicitudin duis nisi.

```{r}
#| label: fig-complex-panel
#| layout: [[50,50], [100]]
#| fig-height: 4
#| fig-cap: Some Graphs of Life Expectancy in 2002
#| fig-subcap: 
#|   - Relationship to GDP cer Capita
#|   - Distribution by Continent
#|   - Distribution
gapminder %>%
  filter(year==2002) %>%
  ggplot(aes(x=gdpPercap, y=lifeExp))+
  geom_point(alpha=0.5)+
  geom_smooth(se=FALSE)+
  scale_x_continuous(labels=scales::dollar)+
  labs(x="gdp per capita", y="life expectancy")+
  theme_bw()

gapminder %>%
  filter(year==2002) %>%
  ggplot(aes(x=continent, y=lifeExp))+
  geom_violin(fill="skyblue")+
  labs(x=NULL, y="life expectancy")+
  theme_bw()

gapminder %>%
  filter(year==2002) %>%
  ggplot(aes(x=lifeExp))+
  geom_histogram(fill="skyblue")+
  labs(x="life expectancy")+
  theme_bw()
```

Ipsum fringilla natoque sem praesent auctor tellus viverra convallis nullam quis risus. Mus natoque cras facilisi ac blandit maecenas fringilla natoque varius. Aptent mauris ac nunc dis habitant penatibus torquent dictumst platea class sociis. Sodales mattis augue libero vestibulum interdum condimentum arcu ridiculus massa lobortis. Orci pretium dictumst sociosqu fringilla praesent faucibus tempus ultrices natoque. Risus potenti class nascetur molestie augue a justo vehicula vivamus? Molestie natoque lectus rhoncus sociosqu ligula semper mattis urna mi quis dignissim?

# Data and Methods

The sample size for this analysis is `r format(nrow(popularity), scientific=FALSE, big.mark=",")` students.

Quisque semper, lectus vel sollicitudin vehicula, turpis ante facilisis mi, bibendum dignissim augue mauris sit amet urna. Sed luctus blandit est, non lobortis lorem suscipit ut. Maecenas sollicitudin sodales elit nec sodales. Pellentesque consectetur feugiat augue sed sodales. Phasellus vitae laoreet purus. Suspendisse urna quam, volutpat et leo et, imperdiet ultrices justo. Nunc ultricies ipsum in ex imperdiet mattis. Maecenas eget tellus eu nibh sagittis tempor. Vestibulum dolor eros, scelerisque non fermentum nec, eleifend eget quam. Vivamus cursus vel augue eu posuere. Suspendisse sed elementum ante.

Adipiscing pretium duis penatibus habitasse nisi metus parturient convallis mattis. Porta pharetra rhoncus dis massa nulla ornare egestas! Ante leo cursus mauris eleifend potenti donec tempus. Fusce ultricies aptent accumsan himenaeos netus augue felis nibh. Duis commodo himenaeos aliquam integer! See @tbl-desc-gt.

```{r}
#| label: tbl-desc-gt
#| tbl-cap: Sample size and descriptive statistics, Add Health data, Wave 1
popularity %>%
  group_by(grade) %>%
  summarize(n=n(), m_nom=mean(indegree),  p_drink=mean(alcoholuse=="Drinker"),
            p_smoke=mean(smoker=="Smoker")) %>%
  gt() %>%
  fmt_integer(grade:n) %>%
  fmt_number(m_nom, decimals=2, pattern = "{x} nominations") %>%
  fmt_percent(starts_with("p_"), decimals = 1) %>%
  cols_label(grade="Grade", n="N", m_nom="Mean Friend Nominations",
             p_drink=md("**Drink Regularly**"), p_smoke="Smoke Regularly") %>%
  tab_spanner("Percent substance use", starts_with("p_")) %>%
  tab_options(table.width = "100%") %>%
  tab_footnote(footnote = "Drinking frequently is defined as drinking at least one or twice a month for the previous 12 months.",
               locations = cells_column_labels(columns = p_drink)) %>%
  tab_footnote(footnote = "Smoking frequently is defined as smoking at least 5 cigarettes in the last 30 days.",
               locations = cells_column_labels(columns = p_smoke)) %>%
  tab_source_note(md("*Source*: National Survey of Adolescent to Adult Health, Wave 1, 1997"))
  
```

```{r}
#| label: tbl-penguins
#| tbl-cap: Some Penguin Data
palmerpenguins::penguins[c(1,200,205,307),] |> 
  select(species, island, body_mass_g, bill_length_mm, sex) |>
  group_by(sex) |>
  gt() |>
  tab_options(table.width="100%") |>
  cols_label(species="Species", island="Island", body_mass_g="Body mass (g)", bill_length_mm="Bill length (mm)") |>
  summary_rows(groups=TRUE, columns=c(body_mass_g, bill_length_mm), 
               fns = list(mean = ~mean(.), median = ~median(.), 
                          "standard deviation" = ~sd(.)),
               missing_text="")
```

Lorem lobortis lectus pellentesque sapien vivamus eros felis cum. Mattis risus euismod vivamus vel mi nostra euismod euismod praesent aliquam? @tbl-desc-gt Sagittis posuere bibendum turpis arcu maecenas gravida leo sollicitudin primis. Ullamcorper lacinia laoreet tincidunt mollis torquent semper. Sem nascetur eleifend gravida nostra magnis arcu gravida facilisis sollicitudin? Cum curae placerat et auctor faucibus arcu ad mauris sollicitudin nunc! Posuere iaculis arcu dapibus dis ullamcorper pellentesque penatibus ultrices sed aenean ligula ullamcorper donec aliquam.

$$y_i=\beta_0+\beta_1x_i+\epsilon_i$$ {#eq-model}

@eq-model lit nam mus class aliquam volutpat purus mauris ultricies aptent dignissim ($\beta_1=0$). Iaculis pulvinar at inceptos sociosqu blandit tristique ridiculus et sagittis mus justo. Suspendisse commodo nullam risus molestie pulvinar elementum malesuada consequat non velit augue. Vehicula id purus vulputate metus dis lectus magna purus nullam scelerisque interdum. Montes quis sem convallis vehicula orci habitasse metus nullam imperdiet faucibus dignissim! Na dignissim. See @fig-dist.

```{r}
#| label: fig-dist
#| fig-cap: "Distribution of number of friend nominations received in Add Health data"
popularity %>%
  ggplot(aes(x=indegree))+
  geom_histogram(binwidth = 1, center=0.5, 
                 color="grey30", fill="grey60")+
  labs(x="number of friend nominations received")+
  theme_bw()
```

@fig-dist onsectetur magnis nisi porttitor massa vivamus iaculis vulputate suscipit vehicula ante nisl? Tempor porttitor netus aliquet inceptos etiam ornare etiam. Suscipit nascetur lacus magna tempus luctus eu. Nisl vitae himenaeos nullam lacinia aenean potenti sociis volutpat feugiat dignissim pellentesque!

# Results

Elit imperdiet aenean varius conubia sagittis orci ultrices. Ridiculus conubia accumsan aliquam mi penatibus molestie fringilla proin. Ullamcorper blandit libero sapien etiam cum justo vel habitant nostra? Molestie tincidunt lobortis dis accumsan curae mi maecenas aptent bibendum eget lacus ad torquent lobortis mattis sagittis aliquam!

```{r}
#| label: tbl-summary
#| tbl-cap: Summary Statistics
popularity |>
  select(indegree, race, parentinc, nsports, sex) |>
  tbl_summary(type=list(nsports="continuous"),
              statistic=list(all_continuous() ~ "{mean} ({sd})", 
                             all_categorical() ~ "{n} ({p}%)"),
              label=list(indegree ~ "Friend nominations",
                         race ~ "Race",
                         sex ~ "Sex",
                         parentinc ~ "Parent income ($1000s)",
                         nsports ~ "Number of sports played"))
```

Lorem accumsan pharetra est cubilia placerat cubilia est fusce natoque laoreet rutrum porta pellentesque tempus! Inceptos arcu augue phasellus nunc ad aptent sem pulvinar maecenas. Tempor porttitor velit fermentum ornare convallis consequat proin mauris. Magna tortor non integer proin semper ad malesuada cras orci.

Lorem accumsan pharetra est cubilia placerat cubilia est fusce natoque laoreet rutrum porta pellentesque tempus! Inceptos arcu augue phasellus nunc ad aptent sem pulvinar maecenas. Tempor porttitor velit fermentum ornare convallis consequat proin mauris. Magna tortor non integer proin semper ad malesuada cras orci. See @fig-scatter.

```{r}
#| label: fig-scatter
#| fig-cap: "Association between parental income and friend nominations by gender."
popularity %>%
  ggplot(aes(x=parentinc, y=indegree, color=sex))+
  geom_jitter(alpha=0.3)+
  geom_smooth(se=FALSE)+
  labs(x="parental income in 1000 USD",
       y="number of friend nominations received",
       color="gender")+
  theme_bw()
```

@fig-scatter Consectetur consequat aptent habitasse dignissim magna feugiat consequat nisl praesent nunc cras tellus? Suscipit curae quis lacus hac rutrum primis sem sem magnis pharetra leo odio parturient libero odio. Mattis praesent maecenas penatibus dapibus hendrerit venenatis libero tellus nascetur. Dis maecenas cursus aptent purus.

Amet quis rutrum sem senectus porttitor torquent habitasse quis commodo ut. Varius at facilisi hendrerit suscipit lacinia enim dui pharetra. Condimentum cum molestie class rutrum porttitor ultricies cursus cum nec nam potenti donec vel! Iaculis dictum ad?

Sit suscipit conubia nisi integer vel suscipit torquent taciti. Urna eu phasellus urna nullam varius nascetur ultricies fringilla. Vivamus platea auctor curabitur senectus natoque morbi dignissim proin pulvinar netus?

Elit semper laoreet tristique etiam egestas arcu ut. Lacus condimentum diam facilisis quam tellus magnis sollicitudin a suspendisse penatibus convallis tellus felis urna. Montes pulvinar ultrices himenaeos interdum nostra imperdiet per mauris luctus. Integer cubilia vestibulum vestibulum parturient cubilia morbi orci dictumst morbi sodales faucibus. Maecenas magnis et nulla nulla.

Lorem nullam nunc habitasse blandit eleifend est mauris. Lacus class mauris interdum netus quisque volutpat. Aliquet at cum lobortis odio dapibus nunc porttitor ullamcorper? Suscipit nostra mi vulputate etiam purus tristique posuere augue orci sociis lectus justo a condimentum nascetur nibh.

Elit varius diam quam magnis suscipit leo aptent congue? Proin placerat ultrices interdum mollis platea integer ac pharetra vulputate lacinia. Viverra nostra bibendum lacus lobortis varius condimentum eleifend faucibus odio justo montes sagittis? Eget imperdiet class tellus tincidunt dictumst sem ridiculus quam? Eget rutrum fames ridiculus eget pretium neque libero per! Eget dignissim magna nunc nulla dis orci interdum tellus tortor risus ut @tbl-model-results.

```{r}
#| label: tbl-model-results
#| tbl-cap: Linear models predicting the number of friend nominations recieved, Add Health data
#| results: asis
#| eval: true
model1 <- lm(indegree~smoker+alcoholuse, data=popularity)
model2 <- update(model1, .~.+parentinc+sex+race)
model3 <- update(model2, .~.+pseudoGPA+honorsociety)
texreg(list(model1, model2, model3),
#        file="model.doc",
        digits=3,
        caption="",
        caption.above=TRUE,
        booktabs=TRUE,
        float.pos = "t",
        dcolumn=TRUE,
        custom.coef.names=c("Intercept","Smoker","Drinker",
                            "Parental income (1000 USD)",
                            "Male","Black","Latino",
                            "Asian/Pacific Islander","Other",
                            "Native American","Pseudo-GPA",
                            "Honor society member"),
        custom.note="%stars. Standard errors in parenthesis.",
        use.packages=FALSE)
```

```{r}
#| label: tbl-model-gt
#| tbl-cap: Linear models predicting the number of friend nominations recieved, Add Health data
#| eval: false
t1 <- tbl_regression(model1, conf.int=FALSE)
t2 <- tbl_regression(model2, conf.int=FALSE)
t3 <- tbl_regression(model3, conf.int=FALSE)
tbl_merge(tbls = list(t1, t2, t3),
          tab_spanner=c("Model 1","Model 2","Model 3"))
```

@tbl-model-results results olor convallis vulputate dictum mollis ante placerat dui parturient porttitor conubia vitae. Eros nec dignissim tortor nascetur laoreet mi nascetur interdum lacus donec? Non potenti elementum massa hendrerit odio taciti euismod sagittis rhoncus sodales montes mattis? Sociosqu luctus neque euismod elementum accumsan parturient sed morbi scelerisque sociis quis faucibus primis suscipit scelerisque.

```{=html}
<!--
::: {#refs}
:::
-->
```
Sit aenean sociosqu curae magna natoque sociis pulvinar sagittis et congue. Sodales magna montes potenti tristique quis? Id suscipit lobortis suspendisse felis taciti massa vitae convallis in montes. Mauris sodales parturient mus tellus mollis dapibus felis vel? Dui malesuada nibh dui ut torquent taciti sodales tempor dapibus vitae montes?

Amet habitasse semper egestas ultricies libero fames orci primis mus sapien fringilla. Pretium tellus convallis bibendum aliquet rutrum potenti! Fringilla et et enim! Lorem molestie lacinia elementum nostra sem et dui condimentum nisl porttitor suspendisse. Felis enim semper nec semper odio.

# Conclusions

Sit praesent nascetur torquent risus interdum erat massa consequat rhoncus. Dignissim arcu augue fermentum odio mattis dictumst turpis nostra vel. Vestibulum velit velit ut dapibus tempus platea nisl ornare justo nascetur proin eleifend nunc. Iaculis interdum quisque platea posuere vitae.

Lorem suscipit pulvinar ultrices netus in porta diam ad habitant. Scelerisque id elementum condimentum scelerisque montes ut id? Dictumst ligula ut ac magnis pretium convallis condimentum et pellentesque taciti montes dignissim vitae.

Consectetur blandit class scelerisque placerat et sapien. Aptent ornare orci commodo leo semper vitae facilisis augue vitae lectus auctor lacus. Bibendum netus porttitor platea taciti enim tincidunt enim vel lectus suspendisse scelerisque.

Consectetur torquent justo cubilia luctus justo erat dignissim faucibus aliquet dictumst. Gravida metus morbi tristique pharetra at venenatis pretium dapibus porttitor commodo. Pulvinar tempus platea accumsan aliquam inceptos magna praesent pulvinar curae sollicitudin. Justo tincidunt imperdiet potenti quam malesuada fames dis et dignissim.

# Bibliography
